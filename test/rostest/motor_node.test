<launch>
    <param name="use_gui" value="False"/>
    <param name="robot_description" textfile="$(find ubiquity_motor)/test/rostest/robot.urdf" />
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher" />

    <rosparam command="load" file="$(find ubiquity_motor)/test/rostest/robot.yaml" />


    <node name="controller_spawner" pkg="controller_manager" type="spawner"
          args="ubiquity_velocity_controller ubiquity_joint_publisher --shutdown-timeout 0.1" />

    <node name="tty0tty" pkg="tty0tty" type="tty0tty" args="/tmp/S0 /tmp/S1" output="screen"/>

    <param name="ubiquity_motor/serial_port" value="/tmp/S0" />
    <node name="motor_node" pkg="ubiquity_motor" type="motor_node">
        <remap from="/ubiquity_velocity_controller/cmd_vel" to="/cmd_vel" />
        <remap from="/ubiquity_velocity_controller/odom" to="/odom" />
    </node>

    <test test-name="motor_node_test" pkg="ubiquity_motor" type="motor_node_test" />
</launch>